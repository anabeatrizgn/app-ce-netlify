{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anabi\\\\OneDrive\\\\Documentos\\\\Projetos\\\\clarke-challenge\\\\front-end\\\\src\\\\paginas\\\\cadastro\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport \"./styles.css\";\nimport { useStyles } from \"../../estilos/backdrop\";\nimport { Backdrop, CircularProgress } from \"@material-ui/core\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useForm } from \"react-hook-form\";\nimport { UseAuth } from \"../../contexto/AuthContext\";\nimport CidadePorCep from \"../../servicos/viacep\";\nimport InputSenha from \"../../componentes/inputSenha\";\nimport Logo from \"../../componentes/logo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Cadastro() {\n  _s();\n\n  const [cep, setCep] = useState(\"\");\n  const [cidade, setCidade] = useState(\"\");\n  const [senhaCadastro, setSenhaCadastro] = useState(\"\");\n  const [confirmarSenha, setConfirmarSenha] = useState(\"\");\n  const {\n    carregando,\n    setCarregando\n  } = UseAuth();\n  const history = useHistory();\n  const classes = useStyles();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n\n  async function handlePreencherCidade(meuCep) {\n    const cidade = await CidadePorCep(meuCep);\n\n    if (!cidade) {\n      toast.error(\"Falha ao encontrar cidade\");\n      return;\n    }\n\n    setCidade(cidade);\n  }\n\n  useEffect(() => {\n    if (cep.length < 9 && cidade.length > 0) {\n      setCidade(\"\");\n    }\n\n    if (cep.indexOf(\"-\") !== -1) {\n      if (cep.length === 9) {\n        handlePreencherCidade(cep);\n      }\n\n      return;\n    }\n\n    if (cep.length === 8) {\n      handlePreencherCidade(cep);\n    }\n  }, [cep]);\n  useEffect(() => {\n    var _errors$email, _errors$nome, _errors$cep, _errors$cidade, _errors$senha, _errors$confirmar_sen;\n\n    if (((_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.type) === \"required\" || ((_errors$nome = errors.nome) === null || _errors$nome === void 0 ? void 0 : _errors$nome.type) === \"required\" || ((_errors$cep = errors.cep) === null || _errors$cep === void 0 ? void 0 : _errors$cep.type) === \"required\" || ((_errors$cidade = errors.cidade) === null || _errors$cidade === void 0 ? void 0 : _errors$cidade.type) === \"required\" || ((_errors$senha = errors.senha) === null || _errors$senha === void 0 ? void 0 : _errors$senha.type) === \"required\" || ((_errors$confirmar_sen = errors.confirmar_senha) === null || _errors$confirmar_sen === void 0 ? void 0 : _errors$confirmar_sen.type) === \"required\") {\n      toast.error(\"Todos os campos s찾o obrigat처rios\");\n    }\n  }, [errors.email, errors.senha, errors.nome, errors.cep, errors.cidade, errors.confirmar_senha]);\n\n  async function onSubmit(data) {\n    if (data.senha !== data.confirmar_senha) {\n      toast.error(\"As senhas devem ser iguais\");\n      return;\n    }\n\n    setCarregando(true);\n    const {\n      confirmar_senha,\n      ...dataRequerida\n    } = data;\n    const body = JSON.stringify(dataRequerida);\n\n    try {\n      const response = await fetch(\"http://localhost:3300/cadastro\", {\n        method: \"POST\",\n        headers: {\n          accept: \"application/json\",\n          \"content-type\": \"application/json\"\n        },\n        body\n      });\n      const cadastro = await response.json();\n\n      if (response.status !== 200) {\n        toast.error(cadastro);\n      } else {\n        toast.success(cadastro, {\n          onClose: () => {\n            history.push(\"/login\");\n          }\n        });\n      }\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setCarregando(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form form-cadastro\",\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-blue\",\n            children: \"Cadastre-se\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Entrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"body-cadastro\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-blue\",\n                children: \"Nome\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Digite seu nome\",\n                type: \"text\",\n                ...register(\"nome\", {\n                  required: true\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-blue\",\n                children: \"CEP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Digite seu cep\",\n                type: \"text\",\n                ...register(\"cep\", {\n                  required: true\n                }),\n                value: cep,\n                maxLenght: 9,\n                onChange: e => setCep(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(InputSenha, {\n              label: \"Senha\",\n              placeholder: \"Digite sua senha\",\n              value: senhaCadastro,\n              setValue: setSenhaCadastro,\n              ...register(\"senha\", {\n                required: true\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-blue\",\n                children: \"E-mail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Digite seu e-mail\",\n                type: \"text\",\n                ...register(\"email\", {\n                  required: true\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-blue\",\n                children: \"Cidade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Digite seu cidade\",\n                ...register(\"cidade\", {\n                  required: true\n                }),\n                type: \"text\",\n                value: cidade\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(InputSenha, {\n              label: \"Confirme sua senha\",\n              placeholder: \"Digite sua senha novamente\",\n              value: confirmarSenha,\n              setValue: setConfirmarSenha,\n              ...register(\"confirmar_senha\", {\n                required: true\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-row content-center item-center mb-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bt-primario\",\n            children: \"Enviar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Backdrop, {\n      className: classes.backdrop,\n      open: carregando,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"inherit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Cadastro, \"YGCIDem4Dtw2eeENMpVp2emMWvA=\", false, function () {\n  return [useHistory, useStyles, useForm];\n});\n\n_c = Cadastro;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cadastro\");","map":{"version":3,"sources":["C:/Users/anabi/OneDrive/Documentos/Projetos/clarke-challenge/front-end/src/paginas/cadastro/index.js"],"names":["useStyles","Backdrop","CircularProgress","Link","useHistory","useEffect","useState","toast","useForm","UseAuth","CidadePorCep","InputSenha","Logo","Cadastro","cep","setCep","cidade","setCidade","senhaCadastro","setSenhaCadastro","confirmarSenha","setConfirmarSenha","carregando","setCarregando","history","classes","register","handleSubmit","formState","errors","handlePreencherCidade","meuCep","error","length","indexOf","email","type","nome","senha","confirmar_senha","onSubmit","data","dataRequerida","body","JSON","stringify","response","fetch","method","headers","accept","cadastro","json","status","success","onClose","push","message","required","e","target","value","backdrop"],"mappings":"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","sourcesContent":["import \"./styles.css\";\r\nimport { useStyles } from \"../../estilos/backdrop\";\r\nimport { Backdrop, CircularProgress } from \"@material-ui/core\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { UseAuth } from \"../../contexto/AuthContext\";\r\nimport CidadePorCep from \"../../servicos/viacep\";\r\nimport InputSenha from \"../../componentes/inputSenha\";\r\nimport Logo from \"../../componentes/logo\";\r\n\r\nexport default function Cadastro() {\r\n  const [cep, setCep] = useState(\"\");\r\n  const [cidade, setCidade] = useState(\"\");\r\n  const [senhaCadastro, setSenhaCadastro] = useState(\"\");\r\n  const [confirmarSenha, setConfirmarSenha] = useState(\"\");\r\n  const { carregando, setCarregando } = UseAuth();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm();\r\n\r\n  async function handlePreencherCidade(meuCep) {\r\n    const cidade = await CidadePorCep(meuCep);\r\n\r\n    if (!cidade) {\r\n      toast.error(\"Falha ao encontrar cidade\");\r\n      return;\r\n    }\r\n    setCidade(cidade);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (cep.length < 9 && cidade.length > 0) {\r\n      setCidade(\"\");\r\n    }\r\n\r\n    if (cep.indexOf(\"-\") !== -1) {\r\n      if (cep.length === 9) {\r\n        handlePreencherCidade(cep);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (cep.length === 8) {\r\n      handlePreencherCidade(cep);\r\n    }\r\n  }, [cep]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      errors.email?.type === \"required\" ||\r\n      errors.nome?.type === \"required\" ||\r\n      errors.cep?.type === \"required\" ||\r\n      errors.cidade?.type === \"required\" ||\r\n      errors.senha?.type === \"required\" ||\r\n      errors.confirmar_senha?.type === \"required\"\r\n    ) {\r\n      toast.error(\"Todos os campos s찾o obrigat처rios\");\r\n    }\r\n  }, [\r\n    errors.email,\r\n    errors.senha,\r\n    errors.nome,\r\n    errors.cep,\r\n    errors.cidade,\r\n    errors.confirmar_senha,\r\n  ]);\r\n\r\n  async function onSubmit(data) {\r\n    if (data.senha !== data.confirmar_senha) {\r\n      toast.error(\"As senhas devem ser iguais\");\r\n      return;\r\n    }\r\n\r\n    setCarregando(true);\r\n    const { confirmar_senha, ...dataRequerida } = data;\r\n    const body = JSON.stringify(dataRequerida);\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:3300/cadastro\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          accept: \"application/json\",\r\n          \"content-type\": \"application/json\",\r\n        },\r\n        body,\r\n      });\r\n\r\n      const cadastro = await response.json();\r\n\r\n      if (response.status !== 200) {\r\n        toast.error(cadastro);\r\n      } else {\r\n        toast.success(cadastro, {\r\n          onClose: () => {\r\n            history.push(\"/login\");\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    } finally {\r\n      setCarregando(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Logo />\r\n      <div className=\"container-form\">\r\n        <form className=\"form form-cadastro\" onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"text-center mb-lg\">\r\n            <h1 className=\"text-blue\">Cadastre-se</h1>\r\n            <Link to=\"/login\">Entrar</Link>\r\n          </div>\r\n          <div className=\"body-cadastro\">\r\n            <div>\r\n              <div className=\"flex-column\">\r\n                <label className=\"text-blue\">Nome</label>\r\n                <input\r\n                  placeholder=\"Digite seu nome\"\r\n                  type=\"text\"\r\n                  {...register(\"nome\", { required: true })}\r\n                />\r\n              </div>\r\n              <div className=\"flex-column\">\r\n                <label className=\"text-blue\">CEP</label>\r\n                <input\r\n                  placeholder=\"Digite seu cep\"\r\n                  type=\"text\"\r\n                  {...register(\"cep\", { required: true })}\r\n                  value={cep}\r\n                  maxLenght={9}\r\n                  onChange={(e) => setCep(e.target.value)}\r\n                />\r\n              </div>\r\n              <InputSenha\r\n                label=\"Senha\"\r\n                placeholder=\"Digite sua senha\"\r\n                value={senhaCadastro}\r\n                setValue={setSenhaCadastro}\r\n                {...register(\"senha\", { required: true })}\r\n              />\r\n            </div>\r\n            <div>\r\n              <div className=\"flex-column\">\r\n                <label className=\"text-blue\">E-mail</label>\r\n                <input\r\n                  placeholder=\"Digite seu e-mail\"\r\n                  type=\"text\"\r\n                  {...register(\"email\", { required: true })}\r\n                />\r\n              </div>\r\n              <div className=\"flex-column\">\r\n                <label className=\"text-blue\">Cidade</label>\r\n                <input\r\n                  placeholder=\"Digite seu cidade\"\r\n                  {...register(\"cidade\", { required: true })}\r\n                  type=\"text\"\r\n                  value={cidade}\r\n                />\r\n              </div>\r\n              <InputSenha\r\n                label=\"Confirme sua senha\"\r\n                placeholder=\"Digite sua senha novamente\"\r\n                value={confirmarSenha}\r\n                setValue={setConfirmarSenha}\r\n                {...register(\"confirmar_senha\", { required: true })}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex-row content-center item-center mb-lg\">\r\n            <button className=\"bt-primario\">Enviar</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <Backdrop className={classes.backdrop} open={carregando}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}